<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Code - Admin Dashboard</title>
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#16a34a',
            secondary: '#15803d'
          }
        }
      }
    }
  </script>
</head>
<body class="bg-gray-50">
  <!-- Fixed top navbar -->
  <nav class="fixed top-0 left-0 right-0 z-50 bg-green-600 text-white shadow-lg">
    <div class="flex items-center justify-between px-4 py-3">
      <div class="flex items-center">
        <button class="p-2 hover:bg-green-700 rounded-lg transition-colors mr-3" id="toggleSidebarBtn" aria-label="Toggle sidebar">
          <i id="sidebarMenuIcon" data-lucide="menu" class="w-6 h-6"></i>
        </button>
        <h1 class="text-xl font-semibold">Code Management</h1>
      </div>
      <div class="flex items-center space-x-4">
        <span class="text-sm">Admin Dashboard</span>
      </div>
    </div>
  </nav>

  <!-- Sidebar -->
  <div id="sidebar" class="fixed left-0 top-0 h-full w-64 bg-white shadow-lg transform -translate-x-full transition-transform duration-300 ease-in-out z-40">
    <div class="p-4">
      <h2 class="text-lg font-semibold text-gray-800 mb-4">Navigation</h2>
      <nav class="space-y-2">
        <a href="#" onclick="showDashboard(); return false;" class="flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-green-100 hover:text-green-700 rounded-lg transition-colors">
          <i data-lucide="home" class="w-5 h-5"></i>
          <span>Dashboard</span>
        </a>
        <a href="#" onclick="showStudents(); return false;" class="flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-green-100 hover:text-green-700 rounded-lg transition-colors">
          <i data-lucide="users" class="w-5 h-5"></i>
          <span>Students</span>
        </a>
        <a href="#" onclick="showPayments(); return false;" class="flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-green-100 hover:text-green-700 rounded-lg transition-colors">
          <i data-lucide="credit-card" class="w-5 h-5"></i>
          <span>Payments</span>
        </a>
        <a href="#" onclick="showNotes(); return false;" class="flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-green-100 hover:text-green-700 rounded-lg transition-colors">
          <i data-lucide="sticky-note" class="w-5 h-5"></i>
          <span>Notes</span>
        </a>
        <a href="#" onclick="showCode(); return false;" class="flex items-center space-x-3 px-4 py-3 text-green-600 bg-green-50 rounded-lg">
          <i data-lucide="code" class="w-5 h-5"></i>
          <span>Code</span>
        </a>
      </nav>
    </div>
  </div>

  <!-- Overlay -->
  <div id="sidebarOverlay" class="fixed inset-0 bg-black bg-opacity-50 z-30 hidden"></div>

  <!-- Main content -->
  <div class="pt-16">
    <div class="p-6">
      <div class="max-w-7xl mx-auto">
        <!-- Page Header -->
        <div class="mb-8">
          <h1 class="text-3xl font-bold text-gray-900">Code Management</h1>
          <p class="text-gray-600 mt-2">Manage and view your Google Apps Script code</p>
        </div>

        <!-- Code Actions -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
          <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
            <div class="flex items-center mb-4">
              <div class="p-2 bg-blue-100 rounded-lg">
                <i data-lucide="upload" class="w-6 h-6 text-blue-600"></i>
              </div>
              <h3 class="text-lg font-semibold text-gray-900 ml-3">Push Code</h3>
            </div>
            <p class="text-gray-600 mb-4">Deploy your local changes to Google Apps Script</p>
            <button onclick="pushCode()" class="w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">
              Push to Apps Script
            </button>
          </div>

          <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
            <div class="flex items-center mb-4">
              <div class="p-2 bg-green-100 rounded-lg">
                <i data-lucide="download" class="w-6 h-6 text-green-600"></i>
              </div>
              <h3 class="text-lg font-semibold text-gray-900 ml-3">Pull Code</h3>
            </div>
            <p class="text-gray-600 mb-4">Download the latest code from Google Apps Script</p>
            <button onclick="pullCode()" class="w-full bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors">
              Pull from Apps Script
            </button>
          </div>

          <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
            <div class="flex items-center mb-4">
              <div class="p-2 bg-purple-100 rounded-lg">
                <i data-lucide="git-branch" class="w-6 h-6 text-purple-600"></i>
              </div>
              <h3 class="text-lg font-semibold text-gray-900 ml-3">Version Control</h3>
            </div>
            <p class="text-gray-600 mb-4">Manage code versions and deployments</p>
            <button onclick="showVersions()" class="w-full bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors">
              View Versions
            </button>
          </div>
        </div>

        <!-- Code Status -->
        <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8">
          <h2 class="text-xl font-semibold text-gray-900 mb-4">Code Status</h2>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <h3 class="text-sm font-medium text-gray-500 mb-2">Last Push</h3>
              <p class="text-lg font-semibold text-gray-900" id="lastPushTime">Never</p>
            </div>
            <div>
              <h3 class="text-sm font-medium text-gray-500 mb-2">Status</h3>
              <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800" id="codeStatus">
                Up to date
              </span>
            </div>
          </div>
        </div>

        <!-- Recent Changes -->
        <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
          <h2 class="text-xl font-semibold text-gray-900 mb-4">Recent Changes</h2>
          <div class="space-y-4" id="recentChanges">
            <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
              <div class="flex items-center">
                <div class="w-2 h-2 bg-green-500 rounded-full mr-3"></div>
                <div>
                  <p class="font-medium text-gray-900">Fixed lesson grouping logic</p>
                  <p class="text-sm text-gray-500">Updated frontend to group lessons by eventID</p>
                </div>
              </div>
              <span class="text-sm text-gray-500">2 hours ago</span>
            </div>
            <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
              <div class="flex items-center">
                <div class="w-2 h-2 bg-blue-500 rounded-full mr-3"></div>
                <div>
                  <p class="font-medium text-gray-900">Added EventID to backend</p>
                  <p class="text-sm text-gray-500">Updated getExistingLessonsFromSheet to include eventID</p>
                </div>
              </div>
              <span class="text-sm text-gray-500">4 hours ago</span>
            </div>
            <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
              <div class="flex items-center">
                <div class="w-2 h-2 bg-yellow-500 rounded-full mr-3"></div>
                <div>
                  <p class="font-medium text-gray-900">Fixed card positioning</p>
                  <p class="text-sm text-gray-500">Updated card positioning logic to use unique lessons count</p>
                </div>
              </div>
              <span class="text-sm text-gray-500">6 hours ago</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Initialize Lucide icons
    lucide.createIcons();

    // Sidebar toggle functionality
    const sidebar = document.getElementById('sidebar');
    const sidebarOverlay = document.getElementById('sidebarOverlay');
    const toggleBtn = document.getElementById('toggleSidebarBtn');
    const sidebarMenuIcon = document.getElementById('sidebarMenuIcon');

    function toggleSidebar() {
      sidebar.classList.toggle('-translate-x-full');
      sidebarOverlay.classList.toggle('hidden');
      
      // Update icon
      if (sidebar.classList.contains('-translate-x-full')) {
        sidebarMenuIcon.setAttribute('data-lucide', 'menu');
      } else {
        sidebarMenuIcon.setAttribute('data-lucide', 'x');
      }
      lucide.createIcons();
    }

    toggleBtn.addEventListener('click', toggleSidebar);
    sidebarOverlay.addEventListener('click', toggleSidebar);

    // Code management functions
    function pushCode() {
      // Simulate push operation
      const button = event.target;
      const originalText = button.textContent;
      button.textContent = 'Pushing...';
      button.disabled = true;
      
      setTimeout(() => {
        button.textContent = 'Push Complete';
        button.classList.remove('bg-blue-600', 'hover:bg-blue-700');
        button.classList.add('bg-green-600');
        
        // Update last push time
        document.getElementById('lastPushTime').textContent = new Date().toLocaleString();
        
        setTimeout(() => {
          button.textContent = originalText;
          button.disabled = false;
          button.classList.remove('bg-green-600');
          button.classList.add('bg-blue-600', 'hover:bg-blue-700');
        }, 2000);
      }, 2000);
    }

    function pullCode() {
      // Simulate pull operation
      const button = event.target;
      const originalText = button.textContent;
      button.textContent = 'Pulling...';
      button.disabled = true;
      
      setTimeout(() => {
        button.textContent = 'Pull Complete';
        button.classList.remove('bg-green-600', 'hover:bg-green-700');
        button.classList.add('bg-blue-600');
        
        setTimeout(() => {
          button.textContent = originalText;
          button.disabled = false;
          button.classList.remove('bg-blue-600');
          button.classList.add('bg-green-600', 'hover:bg-green-700');
        }, 2000);
      }, 2000);
    }

    function showVersions() {
      alert('Version control feature coming soon!');
    }

    // Navigation functions (these would be defined in the main app)
    function showDashboard() {
      window.location.href = 'Index.html';
    }

    function showStudents() {
      // This would navigate to students page
      console.log('Navigate to students');
    }

    function showPayments() {
      // This would navigate to payments page
      console.log('Navigate to payments');
    }

    function showNotes() {
      // This would navigate to notes page
      console.log('Navigate to notes');
    }

    function showCode() {
      // Already on code page
      console.log('Already on code page');
    }
  </script>
</body>
</html>
